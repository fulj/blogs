定义数据库和实例
---
- 数据库：物理操作系统文件或其他形式文件类型的集合
    + 数据库是文件存放于耳机存储器中
- 实例：后台线程以及一个共享内存区组成
    + 实例是程序，位于用户与操作系统之间的一层管理软件，用户对数据库数据任何操作，包括数据库定义、查询、维护、运行控制等都是在数据库实例下进行的，应用程序只有通过数据库实例才能和数据库打交道。

MySQL启动时候回去读配置文件，根据配置文件中的参数来启动数据库实例。，可以没有配置文件这种情况下，MySQL会按照编译时的默认参数设置启动实例。

``` sql
mysql --help | grep my.cnf
```
配置文件中有一个参数datadir，指定数据库所在路径。
``` sql
SHOW VARIABLES LIKE 'datadir'\G
```

mysql体系结构
---
- 连接池组件
- 管理服务和工具组件
- sql接口组件
- 查询分析器组件
- 优化器组件
- 缓冲组件
- 插件式存储引擎
- 物理文件

存储引擎是底层物理结构的实现，每个存储引擎开发者可以按照自己的意愿来进行开发，存储引擎是基于表的

InnoDB存储引擎
---
- MVCC高并发
- 4种隔离级别，默认为REPEATABLE
- next-key locking 的 策略来避免幻读 phantom
- 插入缓冲(insert buffer)、二次写(double write)、自适应哈希(adaptive hash index)、预读(read ahead)等高性能和高可用的功能。
- 聚集(clustered)索引，如果没有指定主键 会为每一行生成一个6字节的ROWID，并以此作为主键

连接MySQL
--- 
常用的通信方式有管道、命名管道、命名名字、TCP/IP套接字、UNIX域套接字

InnoDB概述
--- 

### 内存池
- 维护所有进程/线程需要访问的多个内部数据结构。
- 缓存磁盘上的数据，方便快速地读取，同时在对磁盘文件的数据修改之前在这里缓存
- 重做日志（redo log）缓冲

### 后台线程
1. Master Thread
主要负责将缓冲池中的数据移步刷新到磁盘，保证数据的一致性，包括脏页的刷新、合并插入缓冲（INSERT BUFFER）、UNDO页的回收
2. IO Thread
3. Purge Thread
事务被提交后，其所使用的undolog可能不再需要，因此需要PurgeThread来回收已经使用并分配的undo页。
4. Page Cleaner Thread
其作用是将之前版本中脏页的刷新操作都放入到单独的线程中来完成。减轻原master thread的工作，提高InnoDB性能。
